---
/**
 * PostCard - Blog post preview card
 */
interface Props {
  title: string;
  description: string;
  date: Date;
  slug: string;
  tags?: string[];
  lang?: 'en' | 'es';
}

const { title, description, date, slug, tags = [], lang = 'en' } = Astro.props;

const formattedDate = date.toLocaleDateString(lang === 'es' ? 'es-ES' : 'en-US', {
  year: 'numeric',
  month: 'short',
  day: 'numeric',
});

const postUrl = lang === 'es' ? `/es/posts/${slug}` : `/posts/${slug}`;
const readMoreText = lang === 'es' ? 'Leer m√°s' : 'Read more';
---

<article class="post-card card">
  <a href={postUrl} class="post-link">
    <h3 class="post-title">{title}</h3>
  </a>
  
  <p class="post-description">{description}</p>
  
  <div class="post-footer">
    <div class="post-meta">
      {tags.map((tag) => (
        <span class="tag">
          <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"/>
            <circle cx="7.5" cy="7.5" r=".5" fill="currentColor"/>
          </svg>
          {tag}
        </span>
      ))}
      <span class="post-date">
        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
          <line x1="16" y1="2" x2="16" y2="6"/>
          <line x1="8" y1="2" x2="8" y2="6"/>
          <line x1="3" y1="10" x2="21" y2="10"/>
        </svg>
        {formattedDate}
      </span>
    </div>
    
    <a href={postUrl} class="read-more">
      {readMoreText}
      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M5 12h14"/>
        <path d="m12 5 7 7-7 7"/>
      </svg>
    </a>
  </div>
</article>

<style>
  .post-card {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }
  
  .post-link {
    text-decoration: none;
  }
  
  .post-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    transition: color var(--transition-fast);
  }
  
  .post-link:hover .post-title {
    color: var(--text-secondary);
  }
  
  .post-description {
    font-size: 0.875rem;
    color: var(--text-secondary);
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .post-footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 0.25rem;
  }
  
  .post-meta {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: wrap;
  }
  
  .post-date {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.75rem;
    color: var(--text-muted);
  }
  
  .read-more {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.8125rem;
    color: var(--text-muted);
    text-decoration: none;
    transition: color var(--transition-fast);
  }
  
  .read-more:hover {
    color: var(--text-primary);
  }
</style>

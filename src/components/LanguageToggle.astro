---
/**
 * LanguageToggle - Switch between English and Spanish
 */
import { getLangFromUrl, t } from '../i18n/translations';

const lang = getLangFromUrl(Astro.url);
const targetLang = lang === 'en' ? 'es' : 'en';

// Get the current path and construct the target path
const currentPath = Astro.url.pathname;
let targetPath: string;

if (lang === 'en') {
  // Currently English, switch to Spanish
  targetPath = currentPath === '/' ? '/es' : `/es${currentPath}`;
} else {
  // Currently Spanish, switch to English
  targetPath = currentPath.replace(/^\/es/, '') || '/';
}
---

<a 
  href={targetPath} 
  class="lang-toggle" 
  aria-label={t(lang, 'lang.label')}
  title={t(lang, 'lang.label')}
>
  {t(lang, 'lang.switch')}
</a>

<style>
  .lang-toggle {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.375rem 0.625rem;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-primary);
    background: transparent;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    text-decoration: none;
    transition: all var(--transition-fast);
  }
  
  .lang-toggle:hover {
    background: var(--bg-card);
    border-color: var(--border-color-hover);
  }
</style>
